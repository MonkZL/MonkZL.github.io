<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>java-web学习 MyBatis</title><meta name="description" content="May the Force be with you"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="简介
MyBatis是一款优秀的持久层框架,用于简化JDBC开发
官网：https://mybatis.org/mybatis-3/zh/index.html

安装和配置参照官方文档：https://mybatis.org/mybatis-3/zh/getting-started.html

安装
&amp;lt;dependency&amp;gt;
&amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;
&amp;lt;version&amp;gt;x.x.x&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;


创建存放xxxMapper.java的包com.xxx.mapper

在reso.."><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">zhangliang's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">java-web学习 MyBatis</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="toc-text">安装和配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">使用</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/MyBatis"><i class="tag post-item-tag">MyBatis</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">java-web学习 MyBatis</h1><time class="has-text-grey" datetime="2022-12-11T11:25:43.000Z">2022-12-11</time><article class="mt-2 post-content"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul>
<li>MyBatis是一款优秀的<code>持久层框架</code>,用于简化JDBC开发</li>
<li>官网：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></li>
</ul>
<h1 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a>安装和配置</h1><p>参照官方文档：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/getting-started.html">https://mybatis.org/mybatis-3/zh/getting-started.html</a></p>
<ul>
<li><p>安装</p>
<pre><code>&lt;dependency&gt;
&lt;groupId&gt;org.mybatis&lt;/groupId&gt;
&lt;artifactId&gt;mybatis&lt;/artifactId&gt;
&lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li><p>创建存放<code>xxxMapper.java</code>的包<code>com.xxx.mapper</code></p>
</li>
<li><p>在resources下面创建和<code>com.xxx.mapper</code>对应的存放<code>xxxMapper.xml</code>的文件夹<code>com.xxx.mapper</code>（注意这里创建的时候应该输入的是<code>com/xxx/mapper</code>而不是<code>com.xxx.mapper</code>），这样编译后<code>xxxMapper.class</code>就会和<code>xxxMapper.xml</code>保存在一个文件夹下面，从而符合mybatis的规范。</p>
</li>
<li><p>在resources下面创建mybatis-config.xml文件</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
&quot;https://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
 &lt;environments default=&quot;development&quot;&gt;
      &lt;environment id=&quot;development&quot;&gt;
          &lt;transactionManager type=&quot;JDBC&quot;/&gt;
          &lt;dataSource type=&quot;POOLED&quot;&gt;
              &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
              &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///mybatis?useSSL=false&quot;/&gt;
              &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
              &lt;property name=&quot;password&quot; value=&quot;12345678&quot;/&gt;
          &lt;/dataSource&gt;
      &lt;/environment&gt;
  &lt;/environments&gt;
&lt;mappers&gt;
  &lt;!-- 我们自己存放mapper的包名 --&gt;
  &lt;package name=&quot;com.xxx.mapper&quot;/&gt;
&lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
</li>
</ul>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><ul>
<li>创建<code>User.java</code></li>
</ul>
<pre><code>package com.mybatis.pojo;

public class User &#123;
    private Integer id;
    private String username;
    private String password;
    private String companyName;
    private String gender;
    private String addr;

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public String getUsername() &#123;
        return username;
    &#125;

    public void setUsername(String username) &#123;
        this.username = username;
    &#125;

    public String getPassword() &#123;
        return password;
    &#125;

    public void setPassword(String password) &#123;
        this.password = password;
    &#125;

    public String getCompanyName() &#123;
        return companyName;
    &#125;

    public void setCompanyName(String companyName) &#123;
        this.companyName = companyName;
    &#125;

    public String getGender() &#123;
        return gender;
    &#125;

    public void setGender(String gender) &#123;
        this.gender = gender;
    &#125;

    public String getAddr() &#123;
        return addr;
    &#125;

    public void setAddr(String addr) &#123;
        this.addr = addr;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;User&#123;&quot; +
                &quot;id=&quot; + id +
                &quot;, username=&#39;&quot; + username + &#39;\&#39;&#39; +
                &quot;, password=&#39;&quot; + password + &#39;\&#39;&#39; +
                &quot;, companyName=&#39;&quot; + companyName + &#39;\&#39;&#39; +
                &quot;, gender=&#39;&quot; + gender + &#39;\&#39;&#39; +
                &quot;, addr=&#39;&quot; + addr + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;
&#125;
</code></pre>
<ul>
<li>创建<code>UserMapper.java</code></li>
</ul>
<pre><code>package com.mybatis.mapper;

import com.mybatis.pojo.User;
import org.apache.ibatis.annotations.Param;

import java.util.List;

public interface UserMapper &#123;

    List&lt;User&gt; selectAll();

    // 如果单独传参数的话需要指定参数名字，这样在UserMapper.xml那边才能通过#&#123;id&#125;的方式使用
    User selectById(@Param(&quot;id&quot;) int id);

    // 如果传入的是User，这样在UserMapper.xml那边能通过#&#123;id&#125;的方式使用
    List&lt;User&gt; selectUser(User user);
    
    // 如果添加了参数名字，这样在UserMapper.xml那边能通过#&#123;user.id&#125;的方式使用
    // List&lt;User&gt; selectUser(@Param(&quot;user&quot;) User user);

    void addUser(User user);

    void modifyUser(User user);

    void deleteById(@Param(&quot;id&quot;) int id);

&#125;
</code></pre>
<ul>
<li>创建<code>UserMapper.xml</code></li>
</ul>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;mybatis.mapper.UserMapper&quot;&gt;
    &lt;!--  本地user的companyName和数据库储存的不对应，这里做转换  --&gt;
    &lt;resultMap id=&quot;userResultMap&quot; type=&quot;com.mybatis.pojo.User&quot;&gt;
        &lt;result column=&quot;company_name&quot; property=&quot;companyName&quot;/&gt;
    &lt;/resultMap&gt;
    &lt;select id=&quot;selectAll&quot; resultType=&quot;com.mybatis.pojo.User&quot;&gt;
        select * from user;
    &lt;/select&gt;
    &lt;select id=&quot;selectById&quot; resultType=&quot;com.mybatis.pojo.User&quot;&gt;
        select * from user where id = #&#123;id&#125;;
    &lt;/select&gt;
    &lt;select id=&quot;selectUser&quot; resultMap=&quot;userResultMap&quot;&gt;
        select *
        from user
        &lt;where&gt;
            &lt;if test=&quot;username != null and username != &#39;&#39;&quot;&gt;
                and username = #&#123;username&#125;
            &lt;/if&gt;
            &lt;if test=&quot;password != null and password != &#39;&#39;&quot;&gt;
                and password = #&#123;password&#125;
            &lt;/if&gt;
            &lt;if test=&quot;companyName != null and companyName != &#39;&#39;&quot;&gt;
                and company_name = #&#123;companyName&#125;
            &lt;/if&gt;

            &lt;if test=&quot;gender != null and gender != &#39;&#39;&quot;&gt;
                and gender = #&#123;gender&#125;
            &lt;/if&gt;

            &lt;if test=&quot;addr != null and addr != &#39;&#39;&quot;&gt;
                and addr = #&#123;addr&#125;
            &lt;/if&gt;
        &lt;/where&gt;
    &lt;/select&gt;
    &lt;insert id=&quot;addUser&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;
        insert into user(username,password,company_name,gender,addr)
        values(#&#123;username&#125;,#&#123;password&#125;,#&#123;companyName&#125;,#&#123;gender&#125;,#&#123;addr&#125;)
    &lt;/insert&gt;
    &lt;update id=&quot;modifyUser&quot;&gt;
        update user
        &lt;set&gt;
            &lt;if test=&quot;username != null and username != &#39;&#39;&quot;&gt;
                username = #&#123;username&#125;,
            &lt;/if&gt;
            &lt;if test=&quot;password != null and password != &#39;&#39;&quot;&gt;
                password = #&#123;password&#125;,
            &lt;/if&gt;
            &lt;if test=&quot;companyName != null and companyName != &#39;&#39;&quot;&gt;
                company_name = #&#123;companyName&#125;,
            &lt;/if&gt;
            &lt;if test=&quot;gender != null and gender != &#39;&#39;&quot;&gt;
                gender = #&#123;gender&#125;,
            &lt;/if&gt;
            &lt;if test=&quot;addr != null and addr != &#39;&#39;&quot;&gt;
                addr = #&#123;addr&#125;,
            &lt;/if&gt;
        &lt;/set&gt;
        where id = #&#123;id&#125;
    &lt;/update&gt;
    &lt;delete id=&quot;deleteById&quot;&gt;
        delete from user where id = #&#123;id&#125;
    &lt;/delete&gt;
&lt;/mapper&gt;
</code></pre>
<ul>
<li>使用<code>UserMapper.java</code>的方法</li>
</ul>
<pre><code>package com.mybatis.test;

import com.mybatis.mapper.UserMapper;
import com.mybatis.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Test;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

public class MyBatisTest &#123;
    @Test
    public void selectALl() throws IOException &#123;
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder(). build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession();
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        List&lt;User&gt; users = userMapper.selectAll();
        System.out.println(users);
    &#125;

    @Test
    public void selectById() throws IOException &#123;
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder(). build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession();
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        User user = userMapper.selectById(1);
        System.out.println(user);
    &#125;

    @Test
    public void selectUser() throws IOException &#123;
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder(). build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession();
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        User user = new User();
        user.setUsername(&quot;zl&quot;);
        user.setPassword(&quot;123&quot;);
        user.setAddr(&quot;cd&quot;);
        user.setGender(&quot;nan&quot;);
        user.setCompanyName(&quot;lp&quot;);
        List&lt;User&gt; users = userMapper.selectUser(user);
        System.out.println(users);
    &#125;


    @Test
    public void addUser() throws IOException &#123;
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder(). build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession(true);
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        User user = new User();
        user.setUsername(&quot;zll&quot;);
        user.setPassword(&quot;123&quot;);
        user.setAddr(&quot;cd&quot;);
        user.setGender(&quot;nan&quot;);
        user.setCompanyName(&quot;lp&quot;);
        userMapper.addUser(user);
        System.out.println(user.getId());
    &#125;

    @Test
    public void modifyById() throws IOException &#123;
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder(). build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession(true);
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        User user = new User();
        user.setId(1);
        user.setUsername(&quot;zlxl&quot;);
        user.setAddr(&quot;xxx2&quot;);
        user.setGender(&quot;xxx3&quot;);
        user.setCompanyName(&quot;xxx4&quot;);
        userMapper.modifyUser(user);
    &#125;


    @Test
    public void deleteById() throws IOException &#123;
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder(). build(inputStream);
        SqlSession sqlSession = sqlSessionFactory.openSession(true);
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        userMapper.deleteById(2);
    &#125;

&#125;
</code></pre>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><em></em><a class="button is-default" href="/2022/11/20/java-web%E5%AD%A6%E4%B9%A0-MySQL/" title="java-web学习 MySQL"><span class="has-text-weight-semibold">下一页: java-web学习 MySQL</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="MonkZL/MonkZL.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/MonkZL"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> zhangliang 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>